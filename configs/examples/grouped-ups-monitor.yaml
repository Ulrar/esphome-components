# Example: Complete UPS Configuration with Entity Grouping
# Demonstrates improved organization using sorting_group_id
# All entities are organized into logical groups in the web interface

substitutions:
  name: "grouped-ups-monitor"
  friendly_name: "UPS Monitor (Grouped)"
  simulation_mode: "true"        # Set to "false" for real hardware

esphome:
  name: "${name}"
  friendly_name: "${friendly_name}"
  comment: "UPS Monitor with organized entity groups"

# Include entity grouping configuration
packages:
  # MUST BE FIRST - Sets up web server v3 with sorting groups
  entity_groups: !include ../entity_groups.yaml
  
  # Core functionality
  base_ups: !include ../base_ups.yaml
  
  # Grouped sensor packages (use these instead of non-grouped versions)
  essential_grouped: !include ../essential_sensors_grouped.yaml
  extended_grouped: !include ../extended_sensors_grouped.yaml  # Create this similarly
  timer_grouped: !include ../timer_sensors_grouped.yaml        # Create this similarly
  controls_grouped: !include ../ups_controls_grouped.yaml
  
  # Optional: Device-specific optimizations
  # cyberpower_device: !include ../device_types/cyberpower_cp1500.yaml

# Benefits of this configuration:
# 
# Web Interface Organization:
# â”œâ”€â”€ âš¡ Power Status (sorting_weight: 10)
# â”‚   â”œâ”€â”€ UPS Online
# â”‚   â”œâ”€â”€ On Battery Power
# â”‚   â”œâ”€â”€ Low Battery Warning
# â”‚   â””â”€â”€ Overload Warning
# â”‚
# â”œâ”€â”€ ğŸ”‹ Battery Monitoring (sorting_weight: 20)
# â”‚   â”œâ”€â”€ Battery Level
# â”‚   â”œâ”€â”€ Runtime Remaining
# â”‚   â”œâ”€â”€ Battery Charging
# â”‚   â”œâ”€â”€ Battery Voltage
# â”‚   â””â”€â”€ Battery Status
# â”‚
# â”œâ”€â”€ âš¡ Voltage & Frequency (sorting_weight: 30)
# â”‚   â”œâ”€â”€ Input Voltage
# â”‚   â”œâ”€â”€ Output Voltage
# â”‚   â”œâ”€â”€ Input Frequency
# â”‚   â””â”€â”€ Transfer Thresholds
# â”‚
# â”œâ”€â”€ ğŸ“Š Load & Power (sorting_weight: 40)
# â”‚   â”œâ”€â”€ Load Percentage
# â”‚   â”œâ”€â”€ UPS Load Power
# â”‚   â””â”€â”€ Real Power Nominal
# â”‚
# â”œâ”€â”€ â±ï¸ Active Timers (sorting_weight: 50)
# â”‚   â”œâ”€â”€ Timer Shutdown
# â”‚   â”œâ”€â”€ Timer Start
# â”‚   â”œâ”€â”€ Timer Reboot
# â”‚   â””â”€â”€ Active Timer Count
# â”‚
# â”œâ”€â”€ âš™ï¸ Configuration (sorting_weight: 60)
# â”‚   â”œâ”€â”€ Delay Shutdown
# â”‚   â”œâ”€â”€ Delay Start
# â”‚   â”œâ”€â”€ Delay Reboot
# â”‚   â”œâ”€â”€ Beeper Status
# â”‚   â””â”€â”€ Input Sensitivity
# â”‚
# â”œâ”€â”€ ğŸ”” Beeper Controls (sorting_weight: 70)
# â”‚   â”œâ”€â”€ Enable
# â”‚   â”œâ”€â”€ Disable
# â”‚   â”œâ”€â”€ Mute
# â”‚   â””â”€â”€ Test
# â”‚
# â”œâ”€â”€ ğŸ§ª Test Controls (sorting_weight: 80)
# â”‚   â”œâ”€â”€ Quick Battery Test
# â”‚   â”œâ”€â”€ Deep Battery Test
# â”‚   â”œâ”€â”€ Stop Battery Test
# â”‚   â”œâ”€â”€ Panel Test
# â”‚   â”œâ”€â”€ Stop Panel Test
# â”‚   â””â”€â”€ Test Result
# â”‚
# â”œâ”€â”€ â„¹ï¸ Device Information (sorting_weight: 90)
# â”‚   â”œâ”€â”€ Manufacturer
# â”‚   â”œâ”€â”€ Model
# â”‚   â”œâ”€â”€ Serial Number
# â”‚   â”œâ”€â”€ Firmware Version
# â”‚   â””â”€â”€ Manufacture Date
# â”‚
# â””â”€â”€ ğŸ“¡ System Status (sorting_weight: 100)
#     â”œâ”€â”€ Uptime
#     â”œâ”€â”€ WiFi Signal
#     â”œâ”€â”€ IP Address
#     â””â”€â”€ ESPHome Version

# Home Assistant Benefits:
# - Entities appear in logical groups in device view
# - Easier to find specific information
# - Reduces cognitive load when managing UPS
# - Better suited for dashboard organization
# - Improved accessibility for automation setup

# Navigation Benefits:
# - Critical info (power status) appears first
# - Related entities grouped together
# - Less scrolling required
# - Clear visual hierarchy
# - Intuitive organization matches mental model

# Optional: Add custom automations that leverage grouped entities
script:
  - id: log_all_groups
    then:
      - logger.log:
          format: "Power Status: Online=%d, Battery=%d%%, Runtime=%d min"
          args: 
            - 'id(ups_online).state'
            - 'int(id(battery_level).state)'
            - 'int(id(runtime_remaining).state)'